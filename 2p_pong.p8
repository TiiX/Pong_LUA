pico-8 cartridge // http://www.pico-8.com
version 16
__lua__
//variables
//paddle1

padx_p1 = 53
pady_p1 = 6
padw_p1 = 24
padh_p1 = 4

//paddle2

padx_p2 = 53
pady_p2 = 122
padw_p2 = 24
padh_p2 = 4

// ball

ballx = 64
bally = 64
ballsize = 3
ballxdir = 5
ballydir = 3

// player1

lives_p1 = 3
score_p1 = 0

// player2

lives_p2 = 3
score_p2 = 0

// player3

lives_p3 = 3
score_p3 = 0

// player4

lives_p4 = 3
score_p4 = 0

// functions

function movepaddle_1()
	if btn(0) then
		padx_p1 -= 3
	elseif btn(1) then
		padx_p1 += 3
	end
end

function movepaddle_2()
	if btn(2) then
		padx_p2 -= 3
	elseif btn(3) then
		padx_p2 += 3
	end
end

function moveball()
	ballx += ballxdir/2
	bally += ballydir/2
end

function bounceball()
	-- left
	if ballx < ballsize then
		ballxdir = -ballxdir
		sfx(0)
	end
	-- right
	if ballx > 128 - ballsize then
		ballxdir = -ballxdir
		sfx(0)
	end
	-- up
	if bally < ballsize then
		ballydir = -ballydir
		sfx(0)
	end
end

function bouncepaddle_p1()
	if ballx >= padx_p1 and ballx <= padx_p1 + padw_p1 and bally > pady_p1 then
		sfx(1)
		ballydir = -ballydir
		score_p1 += 10 -- score update
	end
end

function bouncepaddle_p2()
	if ballx >= padx_p2 and ballx <= padx_p2 + padw_p2 and bally > pady_p2 then
		sfx(1)
		ballydir = -ballydir
		score_p2 += 10 -- score update
	end
end

function loseball()
	if bally > 128 then
		if lives_p1 > 0 and lives_p2 > 0 then
			sfx(2)
 		bally = 24
 		lives_p1 -= 1
 	elseif lives_p1 == 0 then
 		ballydir = 0
 		ballxdir = 0
 		bally = 64
 		sfx(3)
 	elseif lives_p2 == 0 then
 		ballydir = 0
 		ballxdir = 0
 		bally = 64
 		sfx(3)
 	end
	end
end

function _update()
	if lives_p1 > 0 then
 	movepaddle_1()
 	movepaddle_2()
 	moveball()
 	bouncepaddle_p1()
 	bouncepaddle_p2()
 	bounceball()
 	loseball()
	end
end

function _draw()
	//dead
	if lives_p1 == 0 then
		print("u lose", 64-11, 64, 15)
	//in life
	elseif lives_p1 > 0 then
		-- refresh the screen
 	rectfill(0, 0, 128, 128, 3)
 	-- draw score
 	print(score_p1, 12, 64-5, 8)
 	-- draw score
 	print(score_p2, 12, 64+1, 12)
 	-- draw lives_p1
 	for i = 0, lives_p1-1 do
 		spr(001, 92, 64-12+(10*i))
 	end
 	-- draw lives_p2
 	for i = 0, lives_p2-1 do
 		spr(002, 101, 64-12+(10*i))
 	end
 	-- draw the paddle
 	rectfill(padx_p1, pady_p1, padx_p1+padw_p1, pady_p1+padh_p1, 8)
 	-- draw the paddle
 	rectfill(padx_p2, pady_p2, padx_p2+padw_p2, pady_p2+padh_p2, 12)
 	-- draw the ball
 	circfill(ballx, bally, ballsize, 15)
 end
end

__gfx__
0000000008000080000cc000000990000000b0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000088800888000ccc0000999900000bb0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700888888880ccccc000999999000bb0b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0007700088888888cccccccc99999999bb0bbbb00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0007700088888888cccccccc999999990bbbb0bb0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
007007000888888000ccccc00999999000b0bb000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000088880000ccc00000999900000bb0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000088000000cc00000099000000b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
01000000289522695228040260402404026040289522895224952289522695224010260702807001040010401a4001a40001070010701a4001840018400184001840018400180001800018000184001840018400
010000000000000000210502105021050210500000000000000000000021000210002100021000000000000000000210002100000000000000000000000000000000000000000000000000000000000000000000
000000000000037050370503705000000000000000000000260502605000000000001d0501d0500000000000000000f0500f05000000000000000004050040500405000000000000000000000000000000000000
01000000380503a0503c05035050280501205013050140501b05037050380503a0503605029050110500f0501005017050220503405038050380503605030050160500c050080500705006050060500605006050
010c0808241520000026152000002715230152000002b15229152000002a1522b1522915227152241520000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__music__
00 00000000
00 44454040
00 44404040
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000
00 00000000

